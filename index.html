<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Lorem ipsum dolor sit amet</title>
	<style>
	.banner {
		background: whitesmoke;
		height: 140px;
		margin: 0;
		padding: 0;
		position: absolute;
		width: 100%;
	}
	.content-edit {
    	display: none;
    }
	.edit div {
		color: white;
	}
	.left {
		background-color: #D1CCD9;
		display: grid;
		margin-top: 160px;
		padding: 20px;
	}
	.main {
		display: grid;
		grid-template-columns: 1fr 3fr;
		height: 100%;
		margin: 0;
		padding: 0;
	}
	.right {
		background-color: gray;
		font-size: 20px;
		margin-top: 160px;
		padding: 20px;
	}
	.edit-menu ul {
		list-style-type: none;
		margin: 0;
		padding: 0;
		overflow: hidden;
	}
	.edit-menu li {
		font-size: 18px;
		float: left;
		padding: 20px;
	}
	.edit-menu li:hover {
		background-color: #111111;
	}
	.sort-button {
		background: #8E82A2;
		border: none;
		border-radius: 4px;
		color: whitesmoke;
		cursor: pointer;	
		font-size: 17px;
		padding: .6em;
		margin: 0;
	}
	.sort-bar {
		text-align: left;
	}
	.sort-bar select {
		font-size: 16px;
		padding: .6em;
		margin: 0;
		border: 1px solid #aaa;
		border-radius: .5em;
		-moz-appearance: none;
		-webkit-appearance: none;
		appearance: none;
		background-color: #fff;
		background-repeat: no-repeat, repeat;
	}
	.sort-button:hover {
		background-color: #A59BB5;
	}
	h1 {
		font-size: 40px;
		text-align: center;
		padding: 5px;
	}
	html, body {
		height: 100%;
		margin: 0;
		padding: 0;
		width: 100%;
	}
	nav {
		background-color: #333333;
		display: grid;
		grid-template-columns: 1.5fr 1fr;
		margin: 0;
		height: 60px;
	}
	.search-form {
		text-align: right;
		margin: auto 10px auto auto;
	}
	.search-bar {
		font-size: 14px;
		padding: 3px;
	}
	.search-button {
		background: #8E82A2;
		border: none;
		border-radius: 3px;
		color: whitesmoke;
		cursor: pointer;	
		font-size: 16px;
		padding: 4px 6px 6px 6px;
	}
	.search-button:hover {
		background-color: #A59BB5;
	}
	</style>
	<script>
	var hash_title = location.hash.replace("!", "").replace("#", "");
	if(hash_title){
		fetch('/get-id/' + hash_title).then(function(response){
			response.json().then(function(data){
				viewContent(data[0]['id']);
			})
		})
	};
		
	var onEdit = function(bool){
		var content_edit = document.querySelectorAll('.content-edit');
		var change = 'inline';
		if(bool){
			change = 'none';
		}
		for (var i=0;i<content_edit.length;i++){
			content_edit[i].style.display = change;
		};
	};

	var viewContent = function(id){
		fetch('/content/' + String(id)).then(function(response){
			response.json().then(function(data){
				var content = `<h2>${data[0]['title']}</h2>
					<p>${data[0]['description']}</p>`;
				document.querySelector('.right').innerHTML = content;
				onEdit();
			});
		});
	};
	
	var viewTopic = function(){
		var start = 0;
		try {
			var sortBy = document.getElementById("sort").value;
		} catch {
			sortBy = 'title-asc';
		}
		fetch('/topic-temp/' + sortBy + '/' + String(start)).then(function(response){
			response.json().then(function(data){
				var content = `<ul>`;
				for (var j in data){
					var topic = data[j];
					content += `<li><a onclick="viewContent(${topic['id']})">${topic['title']}</a></li>`;
				}
				content += `</ul>`;
				document.querySelector('.topic-list').innerHTML = content;
			});
		});
	}
	window.addEventListener("load", viewTopic());
	</script>
	  
  </head>
  <body>
    <div class="banner">
      <h1>Lorem ipsum dolor sit amet</h1>
      <nav class="edit">
        <div class="edit-menu">
		  <ul>
			  <li>AuthorTable</li>
			  <li>Create</li>
			  <li class="content-edit">Update</li>
			  <li class="content-edit">Delete</li>
		  </ul>
		</div>
        <div class="search-form">
			<form action="search" method="get">
				<input type="text" class="search search-bar" name="query" placeholder="검색어를 입력하세요." value="">
				<input type="submit" class="search search-button" value="Search">
			</form>	
		  </div>
      </nav>
    </div>
    <div class="main">
      <div class="left">
        <div class="sort-bar">
		  <select id="sort" onchange="viewTopic(this.value);">
			  <option value="title-asc">타이틀 오름차순</option>
			  <option value="title-desc">타이틀 내림차순</option>
			  <option value="date-asc">일자 오름차순</option>
			  <option value="date-desc">일자 내림차순</option>
			  <input type="submit" value="Sort" class="sort-button">
		  </select>
		</div>
        <div class="topic-list">topic-list</div>
        <div class="page-bar">page-bar</div>
      </div>
      <div class="right">right</div>
    </div>
  </body>
</html>